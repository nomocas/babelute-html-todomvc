{"version":3,"file":"app.js","sources":["../node_modules/event-emitter-es6/index.js","../src/store.js","../../babelute/dist/bundles/index.mjs","../../babelute-html-lexicon/dist/bundles/index.mjs","../src/todomvc-html-lexicon.js","../../babelute-html-dom-diffing-pragmatics/dist/bundles/index.mjs","../src/index.js"],"sourcesContent":["'use strict';\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar DEFAULT_VALUES = {\n    emitDelay: 10,\n    strictMode: false\n};\n\n/**\n * @typedef {object} EventEmitterListenerFunc\n * @property {boolean} once\n * @property {function} fn\n */\n\n/**\n * @class EventEmitter\n *\n * @private\n * @property {Object.<string, EventEmitterListenerFunc[]>} _listeners\n * @property {string[]} events\n */\n\nvar EventEmitter = function () {\n\n    /**\n     * @constructor\n     * @param {{}}      [opts]\n     * @param {number}  [opts.emitDelay = 10] - Number in ms. Specifies whether emit will be sync or async. By default - 10ms. If 0 - fires sync\n     * @param {boolean} [opts.strictMode = false] - is true, Emitter throws error on emit error with no listeners\n     */\n\n    function EventEmitter() {\n        var opts = arguments.length <= 0 || arguments[0] === undefined ? DEFAULT_VALUES : arguments[0];\n\n        _classCallCheck(this, EventEmitter);\n\n        var emitDelay = void 0,\n            strictMode = void 0;\n\n        if (opts.hasOwnProperty('emitDelay')) {\n            emitDelay = opts.emitDelay;\n        } else {\n            emitDelay = DEFAULT_VALUES.emitDelay;\n        }\n        this._emitDelay = emitDelay;\n\n        if (opts.hasOwnProperty('strictMode')) {\n            strictMode = opts.strictMode;\n        } else {\n            strictMode = DEFAULT_VALUES.strictMode;\n        }\n        this._strictMode = strictMode;\n\n        this._listeners = {};\n        this.events = [];\n    }\n\n    /**\n     * @protected\n     * @param {string} type\n     * @param {function} listener\n     * @param {boolean} [once = false]\n     */\n\n\n    _createClass(EventEmitter, [{\n        key: '_addListenner',\n        value: function _addListenner(type, listener, once) {\n            if (typeof listener !== 'function') {\n                throw TypeError('listener must be a function');\n            }\n\n            if (this.events.indexOf(type) === -1) {\n                this._listeners[type] = [{\n                    once: once,\n                    fn: listener\n                }];\n                this.events.push(type);\n            } else {\n                this._listeners[type].push({\n                    once: once,\n                    fn: listener\n                });\n            }\n        }\n\n        /**\n         * Subscribes on event type specified function\n         * @param {string} type\n         * @param {function} listener\n         */\n\n    }, {\n        key: 'on',\n        value: function on(type, listener) {\n            this._addListenner(type, listener, false);\n        }\n\n        /**\n         * Subscribes on event type specified function to fire only once\n         * @param {string} type\n         * @param {function} listener\n         */\n\n    }, {\n        key: 'once',\n        value: function once(type, listener) {\n            this._addListenner(type, listener, true);\n        }\n\n        /**\n         * Removes event with specified type. If specified listenerFunc - deletes only one listener of specified type\n         * @param {string} eventType\n         * @param {function} [listenerFunc]\n         */\n\n    }, {\n        key: 'off',\n        value: function off(eventType, listenerFunc) {\n            var _this = this;\n\n            var typeIndex = this.events.indexOf(eventType);\n            var hasType = eventType && typeIndex !== -1;\n\n            if (hasType) {\n                if (!listenerFunc) {\n                    delete this._listeners[eventType];\n                    this.events.splice(typeIndex, 1);\n                } else {\n                    (function () {\n                        var removedEvents = [];\n                        var typeListeners = _this._listeners[eventType];\n\n                        typeListeners.forEach(\n                        /**\n                         * @param {EventEmitterListenerFunc} fn\n                         * @param {number} idx\n                         */\n                        function (fn, idx) {\n                            if (fn.fn === listenerFunc) {\n                                removedEvents.unshift(idx);\n                            }\n                        });\n\n                        removedEvents.forEach(function (idx) {\n                            typeListeners.splice(idx, 1);\n                        });\n\n                        if (!typeListeners.length) {\n                            _this.events.splice(typeIndex, 1);\n                            delete _this._listeners[eventType];\n                        }\n                    })();\n                }\n            }\n        }\n\n        /**\n         * Applies arguments to specified event type\n         * @param {string} eventType\n         * @param {*[]} eventArguments\n         * @protected\n         */\n\n    }, {\n        key: '_applyEvents',\n        value: function _applyEvents(eventType, eventArguments) {\n            var typeListeners = this._listeners[eventType];\n\n            if (!typeListeners || !typeListeners.length) {\n                if (this._strictMode) {\n                    throw 'No listeners specified for event: ' + eventType;\n                } else {\n                    return;\n                }\n            }\n\n            var removableListeners = [];\n            typeListeners.forEach(function (eeListener, idx) {\n                eeListener.fn.apply(null, eventArguments);\n                if (eeListener.once) {\n                    removableListeners.unshift(idx);\n                }\n            });\n\n            removableListeners.forEach(function (idx) {\n                typeListeners.splice(idx, 1);\n            });\n        }\n\n        /**\n         * Emits event with specified type and params.\n         * @param {string} type\n         * @param eventArgs\n         */\n\n    }, {\n        key: 'emit',\n        value: function emit(type) {\n            var _this2 = this;\n\n            for (var _len = arguments.length, eventArgs = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n                eventArgs[_key - 1] = arguments[_key];\n            }\n\n            if (this._emitDelay) {\n                setTimeout(function () {\n                    _this2._applyEvents.call(_this2, type, eventArgs);\n                }, this._emitDelay);\n            } else {\n                this._applyEvents(type, eventArgs);\n            }\n        }\n\n        /**\n         * Emits event with specified type and params synchronously.\n         * @param {string} type\n         * @param eventArgs\n         */\n\n    }, {\n        key: 'emitSync',\n        value: function emitSync(type) {\n            for (var _len2 = arguments.length, eventArgs = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n                eventArgs[_key2 - 1] = arguments[_key2];\n            }\n\n            this._applyEvents(type, eventArgs);\n        }\n\n        /**\n         * Destroys EventEmitter\n         */\n\n    }, {\n        key: 'destroy',\n        value: function destroy() {\n            this._listeners = {};\n            this.events = [];\n        }\n    }]);\n\n    return EventEmitter;\n}();\n\nmodule.exports = EventEmitter;\n","/**\n * Simple Naive \"Immutable\" Todo Store.\n * @author Gilles Coomans\n */\n\nimport EventEmitter from 'event-emitter-es6';\n\nconst Todos = new EventEmitter(),\n\tproto = {\n\t\ttodos: [],\n\t\troute: 'all',\n\t\tID: 0,\n\t\tmethods: {\n\t\t\tappend(title) {\n\t\t\t\tthis.todos = this.todos.concat({\n\t\t\t\t\ttitle: title || '',\n\t\t\t\t\tid: this.ID++,\n\t\t\t\t\tcompleted: false\n\t\t\t\t});\n\t\t\t\tthis.emit('update', this);\n\t\t\t},\n\t\t\tprepend(title) {\n\t\t\t\tthis.todos = [{\n\t\t\t\t\ttitle: title || '',\n\t\t\t\t\tid: this.ID++,\n\t\t\t\t\tcompleted: false\n\t\t\t\t}].concat(this.todos);\n\t\t\t\tthis.emit('update', this);\n\t\t\t},\n\t\t\tdelete(id) {\n\t\t\t\tthis.todos = this.todos.filter((todo) => {\n\t\t\t\t\treturn todo.id !== id;\n\t\t\t\t});\n\t\t\t\tthis.emit('update', this);\n\t\t\t},\n\t\t\ttoggleComplete(id) {\n\t\t\t\tthis.todos = this.todos.map((todo) => {\n\t\t\t\t\tif (todo.id === id) {\n\t\t\t\t\t\ttodo = Object.assign({}, todo);\n\t\t\t\t\t\ttodo.completed = !todo.completed;\n\t\t\t\t\t}\n\t\t\t\t\treturn todo;\n\t\t\t\t});\n\t\t\t\tthis.emit('update', this);\n\t\t\t},\n\t\t\tupdateTitle(id, title) {\n\t\t\t\tthis.todos = this.todos.map((todo) => {\n\t\t\t\t\tif (todo.id === id && todo.title !== title) {\n\t\t\t\t\t\ttodo = Object.assign({}, todo);\n\t\t\t\t\t\ttodo.title = title;\n\t\t\t\t\t}\n\t\t\t\t\treturn todo;\n\t\t\t\t});\n\t\t\t\tthis.emit('update', this);\n\t\t\t},\n\t\t\tclearCompleted() {\n\t\t\t\tthis.todos = this.todos.filter((todo) => {\n\t\t\t\t\treturn !todo.completed;\n\t\t\t\t});\n\t\t\t\tthis.emit('update', this);\n\t\t\t},\n\t\t\ttoggleAll() {\n\t\t\t\tthis.todos = this.todos.map((todo) => {\n\t\t\t\t\ttodo = Object.assign({}, todo);\n\t\t\t\t\ttodo.completed = !todo.completed;\n\t\t\t\t\treturn todo;\n\t\t\t\t});\n\t\t\t\tthis.emit('update', this);\n\t\t\t}\n\t\t}\n\t};\n\n// copy proto\nfor (const i in proto)\n\tTodos[i] = proto[i];\n\n// bind all methods to root\nfor (const i in Todos.methods)\n\tTodos.methods[i] = Todos.methods[i].bind(Todos);\n\nexport default Todos;\n\n//","var classCallCheck = function (instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n};\n\nvar createClass = function () {\n  function defineProperties(target, props) {\n    for (var i = 0; i < props.length; i++) {\n      var descriptor = props[i];\n      descriptor.enumerable = descriptor.enumerable || false;\n      descriptor.configurable = true;\n      if (\"value\" in descriptor) descriptor.writable = true;\n      Object.defineProperty(target, descriptor.key, descriptor);\n    }\n  }\n\n  return function (Constructor, protoProps, staticProps) {\n    if (protoProps) defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) defineProperties(Constructor, staticProps);\n    return Constructor;\n  };\n}();\n\n\n\n\n\n\n\n\n\nvar inherits = function (subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n};\n\n\n\n\n\n\n\n\n\n\n\nvar possibleConstructorReturn = function (self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n};\n\n// removed in production\n\n/**\n * Lexem class : a lexem is just an object containing 3 properties { lexicon:String, name:String, args:Arguments|Array }\n * You should never construct them directly (but if you do babelute's plugins). And it should never be extended.\n * @protected\n */\nvar Lexem =\n\n/**\n * construct a new lexem instance\n * @param  {String} lexicon the lexicon's name of the lexem\n * @param  {String} name    the lexem's name\n * @param  {Array|arguments} args  the lexem's arguments (an array or the \"callee arguments\" object) \n */\nfunction Lexem(lexicon, name, args) {\n\tclassCallCheck(this, Lexem);\n\n\n\t/**\n  * the lexicon name from where the lexem comes\n  * @type {String}\n  */\n\tthis.lexicon = lexicon;\n\n\t/**\n  * the lexem's name\n  * @type {String}\n  */\n\tthis.name = name;\n\n\t/**\n  * The lexem's arguments array (or arguments object)\n  * @type {Array|arguments}\n  */\n\tthis.args = args;\n};\n\n/**\n * Babelute subclass(es) instances : for holding array of lexems (i.e. a sentence) written through the DSL's API.\n *\n * Will be the base class for all DSLs handlers.\n *\n * Babelute API and lexems Naming Conventions : \n * \n * - any \"meta-language\" method (aka any method that handle the sentence it self - appending new lexem, changing current lexicon, sentences translations, ...) \n * must start with and underscore : e.g. _append, _lexicon, _if,  _each, _eachLexem, _translate...\n * - any \"pragmatics output related\" method should start with a '$' and should be named with followed format : e.g. .$myLexiconToMyOutputType(...)\n * - any DSL lexems (so any other \"api\"'s method) should start with a simple alphabetic char : e.g. .myLexem(), .description(), .title(), ...\n * \t\t\n * @public\n */\n/**\n * Babelute core\n *\n * @author Gilles Coomans\n * @licence MIT\n * @copyright 2016-2017 Gilles Coomans\n */\n\nvar Babelute = function () {\n\n\t/**\n  * construct a babelute instance\n  * @param  {?Array} lexems array of lexems for init. (only for internal use)\n  */\n\tfunction Babelute() {\n\t\tvar lexems = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n\t\tclassCallCheck(this, Babelute);\n\n\n\t\t/**\n   * the array where lexems are stored\n   * @type {Array}\n   */\n\t\tthis._lexems = lexems || [];\n\n\t\t/**\n   * useful marker for fast instanceof replacement (frame/multiple-js-runtime friendly)\n   * @type {Boolean}\n   */\n\t\tthis.__babelute__ = true;\n\t}\n\n\t/**\n  * The absolute Babelute atom method : add a lexem to babelute's array\n  * @public\n  * @param  {String} lexiconName the current lexicon name\n  * @param  {String} name      the lexem's name\n  * @param  {Array|arguments} args   the lexem's arguments (either an array or maybe directly the arguments object from when lexem is called)\n  * @return {Babelute} \tthe current Babelute instance\n  */\n\n\n\tcreateClass(Babelute, [{\n\t\tkey: '_append',\n\t\tvalue: function _append(lexiconName, name, args) {\n\n\t\t\tthis._lexems.push(new Lexem(lexiconName, name, args));\n\n\t\t\treturn this;\n\t\t}\n\n\t\t/**\n   * conditional sentences concatenation.\n   *\n   * Apply modification at sentence writing time (aka the babelute does not contains the _if lexems. _if has immediatly been applied).\n   * \n   * @public\n   * @param  {*} condition any value that will be casted to Boolean (!!)\n   * @param  {Babelute} babelute  which sentence to insert if !!condition === true\n   * @param  {?Babelute} elseBabelute  which sentence to insert if !!condition === false\n   * @return {Babelute}     the current Babelute instance\n   */\n\n\t}, {\n\t\tkey: '_if',\n\t\tvalue: function _if(condition, babelute) {\n\t\t\tvar elseBabelute = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n\n\t\t\tif (condition) this._lexems = this._lexems.concat(babelute._lexems);else if (elseBabelute) this._lexems = this._lexems.concat(elseBabelute._lexems);\n\t\t\treturn this;\n\t\t}\n\n\t\t/**\n   * For each item from array : execute function and concatenate returned babelute sentence to current one. \n   * Provided function must return a babelute.\n   *\n   * Apply modification at sentence writing time (aka the babelute does not contains the _each lexems. _each has immediatly been applied).\n   * \n   * @public\n   * @param  {Array} array  the array to iterate on\n   * @param  {Function} func the function to handle each item. it must return a babelute.\n   * @return {Babelute}     the current Babelute instance\n   */\n\n\t}, {\n\t\tkey: '_each',\n\t\tvalue: function _each(array, func) {\n\t\t\tvar _this = this;\n\n\t\t\tarray.forEach(function (item, index) {\n\t\t\t\tvar b = func(item, index);\n\n\t\t\t\t_this._lexems.push.apply(_this._lexems, b._lexems);\n\t\t\t});\n\t\t\treturn this;\n\t\t}\n\n\t\t/**\n   * Use a babelute (another sentence) at this point in the current sentence\n   * @public\n   * @param  {string|Babelute} babelute Either a string formatted as 'mylexicon:myMethod' (which gives the lexem's method to call), or a Babelute instance (which will be inserted in current sentence)\n   * @param  {?...args} args the optional arguments to use when calling lexem (only if first argument is a string)\n   * @return {Babelute} the current Babelute instance\n   * @throws {Error} If lexicon not found (when first arg is string)\n   * @throws {Error} If method not found in lexicon (when first arg is string)\n   */\n\n\t}, {\n\t\tkey: '_use',\n\t\tvalue: function _use(babelute) {} // eslint-disable-line no-unused-vars\n\t\t// will be implemented in lexicon\n\n\n\t\t/**\n   * Change current lexicon for next lexems\n   * @public\n   * @param  {string} lexiconName the lexicon to use\n   * @return {Babelute}  a new Babelute from lexicon (i.e. with lexicon's API)\n   * @throws {Error} If lexicon not found with lexiconName\n   */\n\n\t}, {\n\t\tkey: '_lexicon',\n\t\tvalue: function _lexicon(lexiconName) {} // eslint-disable-line no-unused-vars\n\t\t// will be implemented in lexicon\n\n\n\t\t/**\n   * Create Babelute subclass\n   * @param  {Babelute} BaseClass the class to be extended\n   * @param  {?Object} api an object containing methods to add to prototype\n   * @return {Babelute}   The subclass\n   * @throws {AssertionError} (only in dev mode) If BaseClass is not a Babelute Subclass (or Babelute)\n   */\n\n\t}], [{\n\t\tkey: 'extends',\n\t\tvalue: function _extends(BaseClass) {\n\t\t\tvar api = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n\t\t\tvar B = function B(lexems) {\n\t\t\t\tBaseClass.call(this, lexems);\n\t\t\t};\n\t\t\tB.prototype = Object.create(BaseClass.prototype);\n\t\t\tB.prototype.constructor = B;\n\t\t\tfor (var i in api) {\n\t\t\t\t// Object.assign seems to bug when used on prototype (not investigate enough : so use plain old for-in syntax)\n\t\t\t\tB.prototype[i] = api[i];\n\t\t\t}return B;\n\t\t}\n\t}]);\n\treturn Babelute;\n}();\n\n/**\n * deserialize json to babelute\n * @param  {String} json the json string\n * @return {Babelute}      the deserialized babelute\n * @throws {Error} If json is badly formated\n */\nfunction fromJSON(json) {\n\treturn JSON.parse(json, function (k, v) {\n\t\tif (v && v.__babelute__) return new Babelute(v._lexems.map(function (lexem) {\n\t\t\treturn new Lexem(lexem.lexicon, lexem.name, lexem.args);\n\t\t}));\n\t\treturn v;\n\t});\n}\n\n// removed in production\n/**\n * A FirstLevel is a Babelute that has exactly same api than its corresponding Babelute (from a DSL) but where every compounds methods has been replaced by its \"atomic\" equivalent.\n * (Same concept than 'first-level of understanding', as if we where stupid by always understanding only first literal sens of words.)\n * \n * It provides sentences and lexems without any interpretation, and that could be really useful : e.g.\n * - to see sentence as \"editable document\" and/or for allowing meta-writing of sentences\n * - to obtain the full AST of babelute sentences \n * \n * @access protected\n */\n/**\n * @author Gilles Coomans\n * @licence MIT\n * @copyright 2017 Gilles Coomans\n */\n\nvar FirstLevel = function (_Babelute) {\n\tinherits(FirstLevel, _Babelute);\n\n\t/**\n  * construct a firstlevel babelute instance\n  * @param  {?Array} lexems array of lexems for init. (only for internal use)\n  */\n\tfunction FirstLevel(lexems) {\n\t\tclassCallCheck(this, FirstLevel);\n\n\t\tvar _this = possibleConstructorReturn(this, (FirstLevel.__proto__ || Object.getPrototypeOf(FirstLevel)).call(this, lexems));\n\n\t\t_this.__first_level_babelute__ = true;\n\t\treturn _this;\n\t}\n\n\t/**\n  * return a FirstLevelMethod aka a method that only append an atom (lexicon, name, args)\n  * @param  {String} lexiconName the lexicon name of the appended atom\n  * @param  {String} lexemName  the lexem name of the appended atom\n  * @return {Function}           a function that append the atom\n  */\n\n\n\tcreateClass(FirstLevel, null, [{\n\t\tkey: 'getFirstLevelMethod',\n\t\tvalue: function getFirstLevelMethod(lexiconName, lexemName) {\n\t\t\treturn function () {\n\t\t\t\tfor (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n\t\t\t\t\targs[_key] = arguments[_key];\n\t\t\t\t}\n\n\t\t\t\tthis._lexems.push(new Lexem(lexiconName, lexemName, args));\n\t\t\t\treturn this;\n\t\t\t};\n\t\t}\n\t}]);\n\treturn FirstLevel;\n}(Babelute);\n\n// removed in production\n\n/**\n * Initializer Class\n * @protected\n */\n/*\n* @Author: Gilles Coomans\n* @Date:   2017-03-10 13:25:25\n* @Last Modified by:   Gilles Coomans\n* @Last Modified time: 2017-04-03 13:49:36\n*/\n\nvar Initializer = function () {\n\tfunction Initializer() {\n\t\tclassCallCheck(this, Initializer);\n\t}\n\n\tcreateClass(Initializer, null, [{\n\t\tkey: 'extends',\n\n\t\t/**\n   * extends Initializer\n   * @param  {[type]} BaseInitializer [description]\n   * @return {[type]}                 [description]\n   */\n\t\tvalue: function _extends(BaseInitializer) {\n\n\t\t\tvar Class = function Class() {};\n\t\t\tClass.prototype = Object.create(BaseInitializer.prototype);\n\t\t\tClass.prototype.constructor = Class;\n\t\t\treturn Class;\n\t\t}\n\t}]);\n\treturn Initializer;\n}();\n\n/**\n * create a Initializer (based on a Babelute subclass) and instanciate it\n * @param  {Babelute} BabeluteClass   a Babelute subclass from where create initializer\n * @param  {?Initializer} BaseInitializer a parent initializer to be extended (optional)\n * @return {Initializer}               the Initializer instance\n * @protected\n */\n\n\nfunction createInitializer(BabeluteClass) {\n\tvar BaseInitializer = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n\n\tvar Init = BabeluteClass.Initializer = BaseInitializer ? Initializer.extends(BaseInitializer) : Initializer;\n\tBabeluteClass.initializer = new Init();\n\tBabeluteClass.initializer._empty = function () {\n\t\treturn new BabeluteClass();\n\t};\n\tBabeluteClass.initializer.BabeluteClass = BabeluteClass;\n\tObject.keys(BabeluteClass).forEach(function (i) {\n\t\taddToInitializer(Init, i);\n\t});\n\treturn BabeluteClass.initializer;\n}\n\n/**\n * add method to initializer\n * @protected\n * @param {Initializer} Initializer Initializer class where add methods in proto\n * @param {string} methodName  the name of method to add\n */\nfunction addToInitializer(Initializer, methodName) {\n\tInitializer.prototype[methodName] = function () {\n\t\treturn this.BabeluteClass.prototype[methodName].apply(new this.BabeluteClass(), arguments);\n\t};\n}\n\n// add base Babelute's api\n['_use', '_each', '_if', '_append', '_lexicon'].forEach(function (methodName) {\n\taddToInitializer(Initializer, methodName);\n});\n\n// removed in production\n/**\n * Lexicons dico : where to store public lexicon\n * @type {Object}\n * @private\n */\nvar lexicons = {};\n\n/**\n * Lexicon class : helpers to store and manage DSL's API.\n * \n * A __Lexicon__ is just an object aimed to handle, store and construct easily a DSL (its lexic - i.e. the bunch of words that compose it)\n * and its related Atomic/FirstLevel/SecondLevel Babelute subclasses, and their initializers.\n *\n * One DSL = One lexicon.\n *\n * A lexicon could extend another lexicon to manage dialects.\n *\n * You should never use frontaly the constructor (aka never use new Lexicon in  your app). Use createLexicon in place.\n * \n * @public\n */\n\nvar Lexicon = function () {\n\n\t/**\n  * @param  {string} name   the lexicon name\n  * @param  {?Lexicon} parent an optional parent lexicon to be extended here\n  */\n\tfunction Lexicon(name) {\n\t\tvar _this = this;\n\n\t\tvar parent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\t\tclassCallCheck(this, Lexicon); // all assertions will be removed in production\n\n\t\t/**\n   * the parent lexicon (if any)\n   * @type {Lexicon}\n   * @public\n   */\n\t\tthis.parent = parent;\n\t\tparent = parent || {};\n\n\t\t/**\n   * the lexicon's name\n   * @type {String}\n   */\n\t\tthis.name = name;\n\n\t\t// the three APIs :\n\t\t/**\n   * interpretable sentences API (finally always made from syntactical atoms (aka last level))\n   * @type {Babelute}\n   * @protected\n   */\n\t\tthis.Atomic = initClass(parent.Atomic || Babelute);\n\t\t/**\n   * \"document\" sentences API (first level : aka all methods has been replaced by fake atomic methods)\n   * @type {Babelute}\n   * @protected\n   */\n\t\tthis.FirstLevel = initClass(parent.FirstLevel || FirstLevel);\n\t\t/**\n   * AST-provider API aka the whole tree between first level and last level. Never use it directly : its used under the hood by {@link developOneLevel} method.\n   * @type {Babelute}\n   * @protected\n   */\n\t\tthis.SecondLevel = Babelute.extends(parent.SecondLevel || Babelute);\n\n\t\t/**\n   * the secondLevel instance\n   * @type {Babelute}\n   * @protected\n   */\n\t\tthis.secondLevel = new this.SecondLevel();\n\n\t\tif (parent.Atomic) Object.keys(parent.Atomic.initializer).forEach(function (key) {\n\t\t\taddToInitializer(_this.Atomic.Initializer, key);\n\t\t\taddToInitializer(_this.FirstLevel.Initializer, key);\n\t\t});\n\t}\n\n\t/**\n  * add atomic lexem (atoms) to lexicon\n  * @param {string[]} atomsArray array of atoms name (as string)\n  * @return {Lexicon} the lexicon itself\n  */\n\n\n\tcreateClass(Lexicon, [{\n\t\tkey: 'addAtoms',\n\t\tvalue: function addAtoms(atomsArray) {\n\t\t\tvar _this2 = this;\n\n\t\t\tatomsArray.forEach(function (name) {\n\t\t\t\treturn addAtom(_this2, name);\n\t\t\t});\n\n\t\t\treturn this;\n\t\t}\n\n\t\t/**\n   * add compounds lexems to lexicon\n   * @param {Function} producer a function that take a babelute initializer as argument and that return an object containing methods (lexems) to add to lexicon\n   * @return {Lexicon} the lexicon itself\n   */\n\n\t}, {\n\t\tkey: 'addCompounds',\n\t\tvalue: function addCompounds(producer) {\n\t\t\tvar _this3 = this;\n\n\t\t\t// Atomic API is produced with Atomic initializer\n\t\t\tvar atomicMethods = producer(this.Atomic.initializer);\n\n\t\t\tfor (var i in atomicMethods) {\n\t\t\t\tthis.Atomic.prototype[i] = atomicMethods[i];\n\t\t\t} // SecondLevel API is simply produced with the related FirstLevel initializer. \n\t\t\t// (so same producer method, same api, but different handler for inner composition)\n\t\t\t// is the only thing to do to gain capability to handle full AST. (see docs)\n\t\t\tvar secondLevelCompounds = producer(this.FirstLevel.initializer);\n\t\t\tfor (var j in secondLevelCompounds) {\n\t\t\t\tthis.SecondLevel.prototype[j] = secondLevelCompounds[j];\n\t\t\t}Object.keys(atomicMethods).forEach(function (key) {\n\t\t\t\t_this3.FirstLevel.prototype[key] = FirstLevel.getFirstLevelMethod(_this3.name, key);\n\t\t\t\taddToInitializer(_this3.Atomic.Initializer, key);\n\t\t\t\taddToInitializer(_this3.FirstLevel.Initializer, key);\n\t\t\t});\n\t\t\treturn this;\n\t\t}\n\n\t\t/**\n   * add aliases lexems to lexicon (aliases are like shortcuts : they are added as this to Atomic, FirstLevel and SecondLevel API)\n   * @param {Object} methods an object containing methods (lexems) to add to lexicon\n   * @return {Lexicon} the lexicon itself\n   */\n\n\t}, {\n\t\tkey: 'addAliases',\n\t\tvalue: function addAliases(methods) {\n\t\t\tvar _this4 = this;\n\n\t\t\tObject.keys(methods).forEach(function (key) {\n\t\t\t\t_this4.Atomic.prototype[key] = _this4.FirstLevel.prototype[key] = _this4.SecondLevel.prototype[key] = methods[key];\n\t\t\t\taddToInitializer(_this4.Atomic.Initializer, key);\n\t\t\t\taddToInitializer(_this4.FirstLevel.Initializer, key);\n\t\t\t});\n\t\t\treturn this;\n\t\t}\n\n\t\t/**\n   * @protected\n   */\n\n\t}, {\n\t\tkey: 'use',\n\t\tvalue: function use(babelute, name, args, firstLevel) {\n\n\t\t\tvar instance = firstLevel ? this.FirstLevel.instance : this.Atomic.instance;\n\n\t\t\tif (!instance[name]) throw new Error('Babelute (' + this.name + ') : method not found : ' + name);\n\t\t\tinstance[name].apply(babelute, args);\n\t\t}\n\n\t\t/**\n   * @protected\n   */\n\n\t}, {\n\t\tkey: 'translateToAtomic',\n\t\tvalue: function translateToAtomic(babelute, targets) {\n\t\t\treturn translate(babelute, this.Atomic, targets || this.targets);\n\t\t}\n\n\t\t/**\n   * @protected\n   */\n\n\t}, {\n\t\tkey: 'translateToFirstLevel',\n\t\tvalue: function translateToFirstLevel(babelute, targets) {\n\t\t\treturn translate(babelute, this.FirstLevel, targets || this.targets);\n\t\t}\n\n\t\t/**\n   * return lexicon's initializer instance. (atomic or firstlevel depending on argument)\n   * @public\n   * @param  {Boolean} firstLevel true if you want firstLevel initializer, false overwise.\n   * @return {Initializer}           the needed initializer instance\n   */\n\n\t}, {\n\t\tkey: 'initializer',\n\t\tvalue: function initializer(firstLevel) {\n\t\t\treturn firstLevel ? this.FirstLevel.initializer : this.Atomic.initializer;\n\t\t}\n\t}, {\n\t\tkey: 'createDialect',\n\t\tvalue: function createDialect(name) {\n\t\t\treturn new Lexicon(name, this);\n\t\t}\n\t}]);\n\treturn Lexicon;\n}();\n\n/**\n *  Add syntactical atom lexem to lexicon (actually to inner classes that reflect API). A syntactical Atom method is a function that only add one lexem.\n *  @private\n */\n\n\nfunction addAtom(lexicon, name) {\n\n\tlexicon.Atomic.prototype[name] = lexicon.FirstLevel.prototype[name] = lexicon.SecondLevel.prototype[name] = FirstLevel.getFirstLevelMethod(lexicon.name, name);\n\taddToInitializer(lexicon.Atomic.Initializer, name);\n\taddToInitializer(lexicon.FirstLevel.Initializer, name);\n}\n\n/**\n * babelute lexicon's Classes initialisation\n * @private\n */\nfunction initClass(BaseClass) {\n\tvar Class = Babelute.extends(BaseClass);\n\tcreateInitializer(Class, BaseClass.Initializer);\n\tClass.instance = new Class();\n\treturn Class;\n}\n\n/**\n * Way to create lexicon instances\n * @public\n * @param  {string} name   the name of the lexicon\n * @param  {Lexicon} parent a lexicon instance as parent for this one (optional)\n * @return {Lexicon}      a lexicon instance\n */\nfunction createLexicon(name) {\n\tvar parent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n\treturn new Lexicon(name, parent);\n}\n\n/**\n * getLexicon registred lexicon by name\n * \n * @param  {string} lexiconName the lexicon's name\n * @return {Lexicon}      the lexicon\n * @throws {Error} If lexicon not found with lexiconName\n */\nfunction getLexicon(lexiconName) {\n\n\tvar lexicon = lexicons[lexiconName];\n\tif (!lexicon) throw new Error('lexicon not found : ' + lexiconName);\n\treturn lexicon;\n}\n\n/**\n * registerLexicon lexicon by name\n * @param  {Lexicon} lexicon the lexicon instance to registerLexicon\n * @param  {?string} name    lexicon name (optional : if not provided : use the one from lexicon itself)\n */\nfunction registerLexicon(lexicon) {\n\tvar name = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n\n\tlexicons[name || lexicon.name] = lexicon;\n}\n\n/*\n * _lexicon handeling\n */\n\n// implementation of already declared method in Babelute's proto\nBabelute.prototype._lexicon = function (lexiconName) {\n\treturn new (getLexicon(lexiconName).Atomic)(this._lexems);\n};\n\nFirstLevel.prototype._lexicon = function (lexiconName) {\n\treturn new (getLexicon(lexiconName).FirstLevel)(this._lexems);\n};\n\n/**\n * _use handeling\n */\n\n// implementation of already declared method in Babelute's proto\nBabelute.prototype._use = function (babelute /* could be a string in \"lexiconName:methodName\" format */) {\n\tfor (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n\t\targs[_key - 1] = arguments[_key];\n\t}\n\n\treturn babelute ? use(this, babelute, args, false) : this;\n};\n\n// implementation of already declared method in Babelute's proto\nFirstLevel.prototype._use = function (babelute /* could be a string in \"lexiconName:methodName\" format */ /*, ...args */) {\n\treturn babelute ? use(this, babelute, [].slice.call(arguments, 1), true) : this;\n};\n\nfunction use(self, babelute, args, firstLevel) {\n\tif (typeof babelute === 'string') {\n\t\tvar splitted = babelute.split(':');\n\t\tgetLexicon(splitted[0]).use(self, splitted[1], args, firstLevel);\n\t} else if (babelute.__babelute__) self._lexems = self._lexems.concat(babelute._lexems);\n\treturn self;\n}\n\n/**\n * Translation\n */\nfunction translate(babelute, BabeluteClass, targets) {\n\tvar b = new BabeluteClass();\n\tbabelute._lexems.forEach(function (lexem) {\n\t\tif (targets && !targets[lexem.lexicon] || this[lexem.name]) // simply forwards lexem (copy) if not in targets\n\t\t\tthis._lexems.push(new Lexem(lexem.lexicon, lexem.name, lexem.args));else this[lexem.name].apply(this, lexem.args.map(function (value) {\n\t\t\tif (!value || !value.__babelute__) return value;\n\t\t\treturn translate(value, BabeluteClass, targets);\n\t\t}));\n\t}, b);\n\treturn b;\n}\n\n/**\n * return a new babelute from needed lexicon\n * @param  {string} lexiconName             the lexicon from where to take api\n * @param  {Boolean} asFirstLevel  True if it needs to return a FirstLevel instance. False or ommitted : returns an Atomic instance.\n * @return {[type]}                  the babelute instance (either an Atomic or a FirstLevel)\n * @throws {Error} If lexicon not found with lexiconName\n */\nfunction init(lexiconName, asFirstLevel) {\n\tif (lexiconName) return new (getLexicon(lexiconName)[asFirstLevel ? 'FirstLevel' : 'Atomic'])();else if (asFirstLevel) return new FirstLevel();\n\treturn new Babelute();\n}\n\n/**\n * develop a FirstLevel compounds-words-lexem through SecondLevel API. It returns the FirstLevel sentence corresponding to lexem's semantic developement.\n * @param  {Lexem} lexem the lexem to develop\n * @param {?Lexicon} lexicon the optional lexicon to use\n * @return {FirstLevel} the developed sentence\n * @throws {Error} If lexicon not found with lexem.lexicon\n * @throws {Error} If method not found in lexicon\n */\nfunction developOneLevel(lexem) {\n\tvar lexicon = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n\n\tlexicon = lexicon || getLexicon(lexem.lexicon);\n\n\treturn lexicon.secondLevel[lexem.name].apply(new lexicon.FirstLevel(), lexem.args);\n}\n\n/**\n * develop a FirstLevel lexem through Atomic API. Return the atomic representation of the lexem (in its own language).\n * @param  {Lexem} lexem the lexem to develop\n * @param {?Lexicon} lexicon the optional lexicon to use\n * @return {Babelute} the developed sentence\n * @throws {Error} If lexicon not found with lexem.lexicon\n * @throws {Error} If method not found in lexicon\n */\nfunction developToAtoms(lexem) {\n\tvar lexicon = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n\n\tlexicon = lexicon || getLexicon(lexem.lexicon);\n\n\treturn lexicon.Atomic.prototype[lexem.name].apply(new lexicon.Atomic(), lexem.args);\n}\n\n/**\n * Provide Babelute Subclass \"initializer\" object (the one with all the flattened shortcut api for starting sentences easily)\n * @param  {string} lexiconName The lexiconName where catch the Babelute Class from where getLexicon or create the initializer object.\n * @param  {boolean} asFirstLevel true if should return a first-level instance. false to return an atomic instance.\n * @return {Object}   An initializer object with shortcuted API from lexicon's Atomic prototype\n * @throws {Error} If lexicon not found with lexiconName\n */\nfunction initializer(lexiconName, asFirstLevel) {\n\tif (!asFirstLevel) return getLexicon(lexiconName).Atomic.initializer;\n\treturn getLexicon(lexiconName).FirstLevel.initializer;\n}\n\n// removed in production\n\n/**\n * Base class to provide homogeneous Pragmatics interface. You should never instanciate a Pragmatics directly with new. use {@link createPragmatics}.\n */\nvar Pragmatics = function () {\n\n\t/**\n  * @param  {Object} targets initial targets object\n  * @param  {Object} pragmas pragmatics methods to add\n  */\n\tfunction Pragmatics() {\n\t\tvar targets = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\t\tvar pragmas = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\t\tclassCallCheck(this, Pragmatics);\n\n\n\t\t/**\n   * targets holder object\n   * @type {Object}\n   * @public\n   */\n\t\tthis._targets = targets;\n\n\t\tif (pragmas) this.addPragmas(pragmas);\n\t}\n\n\t/**\n  * add methods to pragmatics instance\n  * @param {Object} pragmas an object containing methods to add\n  */\n\n\n\tcreateClass(Pragmatics, [{\n\t\tkey: 'addPragmas',\n\t\tvalue: function addPragmas(pragmas) {\n\n\t\t\tfor (var i in pragmas) {\n\t\t\t\t/**\n     * @ignore\n     */\n\t\t\t\tthis[i] = pragmas[i];\n\t\t\t}\n\t\t}\n\n\t\t/* istanbul ignore next */\n\t\t/**\n   * the method used to output a babelute through this pragmatics instance\n   * @abstract\n   */\n\n\t}, {\n\t\tkey: '$output',\n\t\tvalue: function $output() /* ... */{\n\t\t\t// to be overridden\n\t\t\tthrow new Error('pragmatics.$output should be implemented in subclasses');\n\t\t}\n\t}]);\n\treturn Pragmatics;\n}();\n\n/**\n * return a new Pragmatics instance. Do not forget to implement $output before usage.\n * @param  {Object} targets initial targets object\n * @param  {Object} pragmas pragmatics methods to add\n * @return {Pragmatics}   the Pragmatics instance\n */\n/**\n * Pragmatics Class : minimal abstract class for homogeneous pragmatics.\n *\n * This is the minimal contract that a pragmatics should satisfy.\n *\n * @author Gilles Coomans\n * @licence MIT\n * @copyright 2016-2017 Gilles Coomans\n */\n\nfunction createPragmatics() {\n\tvar targets = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\tvar pragmas = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n\treturn new Pragmatics(targets, pragmas);\n}\n\n// removed in production\n/**\n * FacadePragmatics : a facade oriented Pragmatics subclass. You should never instanciate a FacadePragmatics directly with new. use {@link createFacadePragmatics}.\n * @example\n * // Remarque : any lexem's method will be of the following format : \n * function(subject, args, ?percolator){\n * \t// return nothing\n * }\n */\nvar FacadePragmatics = function (_Pragmatics) {\n\tinherits(FacadePragmatics, _Pragmatics);\n\n\t/**\n  * @param  {Object} targets initial targets object\n  * @param  {?Object} pragmas pragmatics methods to add\n  */\n\tfunction FacadePragmatics(targets) {\n\t\tvar pragmas = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\t\tclassCallCheck(this, FacadePragmatics);\n\t\treturn possibleConstructorReturn(this, (FacadePragmatics.__proto__ || Object.getPrototypeOf(FacadePragmatics)).call(this, targets, pragmas));\n\t}\n\n\t/**\n  * \"each\" facade implementation\n  * @param  {Object} subject the handled subject\n  * @param  {Array|arguments} args  the lexem's args : [ collection:Array, itemHandler:Function ]\n  * @param  {?Object} percolator  the sentence's percolator instance\n  * @return {void}         nothing\n  */\n\n\n\tcreateClass(FacadePragmatics, [{\n\t\tkey: 'each',\n\t\tvalue: function each(subject, args /* collection, itemHandler */, percolator) {\n\n\t\t\tvar collec = args[0],\n\t\t\t    itemHandler = args[1];\n\n\t\t\tif (collec && collec.length) // no supputation on collection kind : use \"for\"\n\t\t\t\tfor (var i = 0, len = collec.length, item, templ; i < len; ++i) {\n\t\t\t\t\titem = collec[i];\n\t\t\t\t\ttempl = itemHandler(item, i);\n\t\t\t\t\tif (templ) this.$output(subject, templ, percolator);\n\t\t\t\t}\n\t\t}\n\n\t\t/**\n   * \"if\" facade implementation \n   * @param  {Object} subject the handled subject\n   * @param  {Array|arguments} args  the lexem's args : [ conditionIsTrue:Babelute, conditionIsFalse:Babelute ]\n   * @param  {?Object} percolator  the sentence's percolator instance\n   * @return {void}         nothing\n   */\n\n\t}, {\n\t\tkey: 'if',\n\t\tvalue: function _if(subject, args /* trueBabelute, falseBabelute */, percolator) {\n\n\t\t\tif (args[0]) this.$output(subject, args[1], percolator);else if (args[2]) this.$output(subject, args[2], percolator);\n\t\t}\n\n\t\t/**\n   *\n   * @override\n   * @param  {Object} subject  the subject handle through interpretation\n   * @param  {Babelute} babelute the babelute \"to interpret on\" subject\n   * @param  {Scope} percolator   the sentence percolator instance (optional)\n   * @return {Object}        the subject\n   */\n\n\t}, {\n\t\tkey: '$output',\n\t\tvalue: function $output(subject, babelute) {\n\t\t\tvar percolator = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n\n\t\t\tfor (var i = 0, lexem, len = babelute._lexems.length; i < len; ++i) {\n\t\t\t\tlexem = babelute._lexems[i];\n\t\t\t\tif (this._targets[lexem.lexicon] && this[lexem.name]) this[lexem.name](subject, lexem.args, percolator);\n\t\t\t}\n\t\t\treturn subject;\n\t\t}\n\t}]);\n\treturn FacadePragmatics;\n}(Pragmatics);\n\n/**\n * create a facade-ready-to-run initializer function.\n * @param  {Lexicon} lexicon    the lexicon from where take the api\n * @param  {Object} pragmatics   the pragmatics object where to find interpretation method to fire immediatly\n * @return {Function}            the facade initializer function\n * @example\n *\n * import babelute from 'babelute';\n * const myLexicon = babelute.createLexicon('my-lexicon');\n * myLexicon.addAtoms(['foo', 'bar']);\n * \n * const myPragmas = babelute.createFacadePragmatics({\n * \t'my-lexicon':true\n * }, {\n * \tfoo(subject, args, percolator){\n * \t\t// do something\n * \t},\n * \tbar(subject, args, percolator){\n * \t\t// do something\n * \t}\n * });\n *\n * const mlp = babelute.createFacadeInitializer(myLexicon, myPragmas);\n *\n * mlp(mySubject).foo(...).bar(...); // apply pragmas immediatly on subject through lexicon api's\n *\n */\nfunction createFacadeInitializer(lexicon, pragmatics) {\n\tvar Facade = function Facade(subject) {\n\t\tvar percolator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n\t\tlexicon.Atomic.call(this);\n\t\tthis._subject = subject;\n\t\tthis._percolator = percolator;\n\t};\n\n\tFacade.prototype = Object.create(lexicon.Atomic.prototype);\n\tFacade.prototype.constructor = Facade;\n\tFacade.prototype._lexicon = null;\n\tFacade.prototype._append = function (lexiconName, name, args) {\n\t\tif ((!pragmatics._targets || pragmatics._targets[lexiconName]) && pragmatics[name]) pragmatics[name](this._subject, args, this._percolator);\n\t\treturn this;\n\t};\n\treturn function (subject) {\n\t\tvar percolator = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n\t\treturn new Facade(subject, percolator);\n\t};\n}\n\n/**\n * create a FacadePragmatics instance\n * @param  {Object} targets the pragmatics targets DSL\n * @param  {?Object} pragmas the methods to add\n * @return {FacadePragmatics}     the facade pragmatics instance\n * @example\n * const myPragmas = babelute.createFacadePragmatics({\n * \t'my-lexicon':true\n * }, {\n * \tfoo(subject, args, percolator){\n * \t\t// do something\n * \t},\n * \tbar(subject, args, percolator){\n * \t\t// do something\n * \t}\n * });\n */\nfunction createFacadePragmatics(targets) {\n\tvar pragmas = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n\treturn new FacadePragmatics(targets, pragmas);\n}\n\n/*\n * @author Gilles Coomans\n * @licence MIT\n * @copyright 2016 Gilles Coomans\n */\n\nvar index = {\n\tcreateLexicon: createLexicon,\n\tcreatePragmatics: createPragmatics,\n\tcreateFacadeInitializer: createFacadeInitializer,\n\tcreateFacadePragmatics: createFacadePragmatics,\n\tinit: init,\n\tinitializer: initializer,\n\tgetLexicon: getLexicon,\n\tregisterLexicon: registerLexicon,\n\tdevelopOneLevel: developOneLevel,\n\tdevelopToAtoms: developToAtoms,\n\tfromJSON: fromJSON,\n\tBabelute: Babelute,\n\tLexem: Lexem,\n\tFirstLevel: FirstLevel,\n\tPragmatics: Pragmatics,\n\tFacadePragmatics: FacadePragmatics,\n\tLexicon: Lexicon,\n\tlexicons: lexicons\n};\n\nexport default index;\n//# sourceMappingURL=index.mjs.map\n","import bbl from 'babelute';\n\n/*\n * @Author: Gilles Coomans\n */\n\n/**\n * parse and insert html string in node and return created nodes\n * @param  {[type]} content     [description]\n * @param  {[type]} node        [description]\n * @param  {[type]} nextSibling [description]\n * @return {[type]}             [description]\n */\n/**\n * cast inner nod value depending on node value\n * @param  {DomElement} node [description]\n * @param  {String} type the needed type of the value\n * @return {*}     the casted value\n */\nfunction castNodeValueTo(node, type) {\n\tswitch (type) {\n\t\tcase 'text':\n\t\t\treturn node.textContent;\n\t\tcase 'integer':\n\t\t\treturn parseInt(node.textContent, 10);\n\t\tcase 'html':\n\t\t\treturn node.innerHTML;\n\t\tdefault:\n\t\t\tthrow new Error('content editable casting fail : unrecognised rule : ', type);\n\t}\n}\n\n/**\n * ***** Babelute HTML5 DSL lexicon *****\n *\n * \n * @author Gilles Coomans\n * @licence MIT\n * @copyright 2016-2017 Gilles Coomans\n */\n/**\n * @external {Lexicon} https://github.com/nomocas/babelute\n */\n/**\n * html lexicon\n * @type {Lexicon}\n * @public\n * @see  https://github.com/nomocas/babelute-html\n */\nvar htmlLexicon = bbl.createLexicon('html');\n\n/*******\n *******\tLANGUAGE ATOMS\n *******/\nhtmlLexicon.addAtoms(['tag', 'attr', 'prop', 'data', 'class', 'classes', 'id', 'style', 'text', 'onDom', 'onString', 'if', 'each', 'keyedEach', 'html', 'component', 'ref', 'container', 'client', 'server']);\n\n/*******\n *******\tCOMPOUNDS WORDS (based on language atoms)\n *******/\n// simple tags (made with .tag) (list should be completed if needed)\nhtmlLexicon.tagsList = ['body', 'div', 'h1', 'h2', 'h3', 'h4', 'h5', 'section', 'span', 'button', 'main', 'article', 'hr', 'header', 'footer', 'label', 'ul', 'li', 'p', 'small', 'b', 'strong', 'i', 'u', 'title', 'meta', 'table', 'tr', 'td', 'tbody', 'form', 'br'];\n// events (made with .on) (list should be completed if needed)\nhtmlLexicon.eventsList = ['click', 'blur', 'focus', 'submit', 'mouseover', 'mousedown', 'mouseup', 'mouseout', 'touchstart', 'touchend', 'touchcancel', 'touchleave', 'touchmove', 'drop', 'dragover', 'dragstart'];\n\nhtmlLexicon.addAliases({\n\texecute: function execute(method) {\n\t\tfor (var _len = arguments.length, args = Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n\t\t\targs[_key - 1] = arguments[_key];\n\t\t}\n\n\t\treturn this._append('html', 'execute', [method, args]);\n\t},\n\tswitchUse: function switchUse(lexemRef) {\n\t\tfor (var _len2 = arguments.length, args = Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n\t\t\targs[_key2 - 1] = arguments[_key2];\n\t\t}\n\n\t\treturn this._append('html', 'switchUse', [lexemRef, args]);\n\t},\n\ton: function on(eventName, callback) {\n\t\tfor (var _len3 = arguments.length, args = Array(_len3 > 2 ? _len3 - 2 : 0), _key3 = 2; _key3 < _len3; _key3++) {\n\t\t\targs[_key3 - 2] = arguments[_key3];\n\t\t}\n\n\t\treturn this._append('html', 'on', [eventName, callback, args]);\n\t}\n}).addCompounds(function () {\n\tvar methods = {};\n\thtmlLexicon.tagsList.forEach(function (tagName) {\n\t\tmethods[tagName] = function () {\n\t\t\treturn this._append('html', 'tag', [tagName, arguments]);\n\t\t};\n\t});\n\thtmlLexicon.eventsList.forEach(function (eventName) {\n\t\tmethods[eventName] = function (callback) {\n\t\t\tfor (var _len4 = arguments.length, args = Array(_len4 > 1 ? _len4 - 1 : 0), _key4 = 1; _key4 < _len4; _key4++) {\n\t\t\t\targs[_key4 - 1] = arguments[_key4];\n\t\t\t}\n\n\t\t\treturn this._append('html', 'on', [eventName, callback, args]);\n\t\t};\n\t});\n\treturn methods;\n}).addCompounds(function (h) {\n\treturn {\n\t\tselect: function select(selected, options) {\n\t\t\tvar babelute = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : undefined;\n\n\t\t\tif (arguments.length === 1) // use a simple tag that receive a babelute as child (first arg)\n\t\t\t\treturn this.tag('select', [selected]);\n\t\t\treturn this.tag('select', [h.each(options, function (option) {\n\t\t\t\treturn h.option(option.value, option.label, option.value === selected);\n\t\t\t}), babelute]);\n\t\t},\n\t\tlink: function link(href, rel, babelute) {\n\t\t\treturn this.tag('link', [h.attr('href', href).attr('rel', rel), babelute]);\n\t\t},\n\t\tlinkCSS: function linkCSS(href) {\n\t\t\treturn this.link(href, 'stylesheet', h.attr('type', 'text/css'));\n\t\t},\n\t\tinput: function input(type, val, babelute) {\n\t\t\treturn this.tag('input', [h.attr('type', type).prop('value', val), babelute]);\n\t\t},\n\t\ttextInput: function textInput(val, babelute) {\n\t\t\treturn this.input('text', val, babelute);\n\t\t},\n\t\tpasswordInput: function passwordInput(val, babelute) {\n\t\t\treturn this.input('password', val, babelute);\n\t\t},\n\t\tcheckbox: function checkbox(checked, babelute) {\n\t\t\treturn this.tag('input', [h.attr('type', 'checkbox').prop('checked', !!checked), babelute]);\n\t\t},\n\t\tradio: function radio(checked, babelute) {\n\t\t\treturn this.tag('input', [h.attr('type', 'radio').prop('checked', !!checked), babelute]);\n\t\t},\n\t\toption: function option(value, content, selected) {\n\t\t\treturn this.tag('option', [h.attr('value', value).prop('selected', !!selected), content]);\n\t\t},\n\t\tscript: function script(src, content) {\n\t\t\treturn this.tag('script', [h.attr('src', src).attr('type', 'text/javascript'), content]);\n\t\t},\n\t\ta: function a() {\n\t\t\targuments[0] = h.attr('href', arguments[0]);\n\t\t\treturn this.tag('a', arguments);\n\t\t},\n\t\timg: function img() {\n\t\t\targuments[0] = h.attr('src', arguments[0]);\n\t\t\treturn this.tag('img', arguments);\n\t\t},\n\t\tnbsp: function nbsp() {\n\t\t\treturn this.text('\\xA0');\n\t\t},\n\t\tvisible: function visible(yes) {\n\t\t\treturn this.style('visibility', yes ? 'visible' : 'hidden');\n\t\t},\n\t\tdisplay: function display(flag) {\n\t\t\treturn this.style('display', typeof flag === 'string' ? flag : flag ? 'block' : 'none');\n\t\t},\n\t\tdisabled: function disabled(flag) {\n\t\t\treturn this.prop('disabled', !!flag);\n\t\t},\n\t\tcontentEditable: function contentEditable(opt /*{ value, updateHandler, valueType = \"text\"[|\"html\"|\"integer\"], updateOnEvent = \"blur\", isEditable = true, placeholder = '...' } */) {\n\t\t\tvar contentProperty = opt.valueType === 'html' ? 'innerHTML' : 'textContent';\n\t\t\treturn this.prop('contentEditable', !!opt.isEditable).prop(contentProperty, opt.value || opt.placeholder || '').on(opt.updateOnEvent || 'blur', function (e) {\n\t\t\t\tvar val = castNodeValueTo(e.currentTarget, opt.valueType || 'text');\n\t\t\t\tif (val !== opt.value) opt.updateHandler(val);else if (val === '') e.currentTarget[contentProperty] = opt.placeholder || '';\n\t\t\t}).click(function (e) {\n\t\t\t\tif (opt.isEditable) {\n\t\t\t\t\tif (opt.placeholder && e.currentTarget[contentProperty] === opt.placeholder) e.currentTarget[contentProperty] = '';\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n});\n\nexport default htmlLexicon;\n//# sourceMappingURL=index.mjs.map\n","/**\n * Todomvc html lexicon (aka web components)\n * @author Gilles Coomans\n */\n\nimport babelute from 'babelute';\nimport htmlLexicon from 'babelute-html-lexicon';\n\nconst todomvcLexicon = babelute.createLexicon('todomvc', htmlLexicon);\n\ntodomvcLexicon.addCompounds((h) => {\n\treturn {\n\t\t// main entry point\n\t\ttodomvc(todos, route, methods) {\n\n\t\t\tconst visibleTodos = route !== 'all' ? todos.filter((todo) => {\n\t\t\t\treturn (route === 'completed') ? todo.completed : !todo.completed;\n\t\t\t}) : todos;\n\n\t\t\treturn this.div(\n\t\t\t\th.class('todomvc-wrapper')\n\t\t\t\t.section(\n\t\t\t\t\th.id('todoapp').class('todoapp')\n\t\t\t\t\t.todomvcHeader(methods)\n\t\t\t\t\t.mainSection(visibleTodos, todos.length, methods)\n\t\t\t\t\t.statsSection(todos, route, methods)\n\t\t\t\t)\n\t\t\t\t.todomvcFooter()\n\t\t\t);\n\t\t},\n\n\t\tmainSection(visibleTodos, todosLength, methods) {\n\t\t\treturn this.section(\n\t\t\t\th.id('main').class('main').visible(todosLength)\n\t\t\t\t.toggleAllButton(methods)\n\t\t\t\t.ul(\n\t\t\t\t\th.id('todo-list').class('todo-list')\n\t\t\t\t\t.each(visibleTodos, (todo) => {\n\t\t\t\t\t\treturn h.todoItem(todo, methods);\n\t\t\t\t\t})\n\t\t\t\t)\n\t\t\t);\n\t\t},\n\n\t\ttodomvcHeader(methods) {\n\t\t\treturn this.header(\n\t\t\t\th.id('header').class('header')\n\t\t\t\t.h1('Todos')\n\t\t\t\t.textInput('',\n\t\t\t\t\th.id('new-todo').class('new-todo')\n\t\t\t\t\t.attr('placeholder', 'What needs to be done?')\n\t\t\t\t\t.on('keydown', (e) => {\n\t\t\t\t\t\tif (e.keyCode === 13 && e.target.value) {\n\t\t\t\t\t\t\tmethods.append(e.target.value);\n\t\t\t\t\t\t\te.target.value = '';\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t)\n\t\t\t);\n\t\t},\n\n\t\ttoggleAllButton(methods) {\n\t\t\treturn this.checkbox(false,\n\t\t\t\t\th.id('toggle-all').class('toggle-all')\n\t\t\t\t\t.attr('name', 'toggle')\n\t\t\t\t\t.on('click', methods.toggleAll)\n\t\t\t\t)\n\t\t\t\t.label(h.attr('for', 'toggle-all'), 'Mark all as complete');\n\t\t},\n\n\t\ttodoLabel(methods, title, id) {\n\t\t\treturn this.label(title,\n\t\t\t\th.prop('contentEditable', true)\n\t\t\t\t.on('keyup', (e) => {\n\t\t\t\t\tif (e.keyCode === 27) // escape \n\t\t\t\t\t\tmethods.updateTitle(id, title);\n\t\t\t\t\telse //if (e.keyCode === 13 && e.target.value)\n\t\t\t\t\t\tmethods.updateTitle(id, e.target.textContent);\n\t\t\t\t})\n\t\t\t);\n\t\t},\n\n\t\ttodoItem(todo, methods) {\n\t\t\treturn this.li(\n\t\t\t\th.class('completed', todo.completed)\n\t\t\t\t.div(\n\t\t\t\t\th.class('view')\n\t\t\t\t\t.checkbox(todo.completed, h.class('toggle').click(() => methods.toggleComplete(todo.id)))\n\t\t\t\t\t.todoLabel(methods, todo.title, todo.id)\n\t\t\t\t\t.button(h.class('destroy').click(() => methods.delete(todo.id)))\n\t\t\t\t)\n\t\t\t);\n\t\t},\n\n\t\ttodomvcFooter() {\n\t\t\treturn this.footer(\n\t\t\t\th.id('info').class('info')\n\t\t\t\t.p('Written by ', h.a('https://github.com/nomocas', 'nomocas'))\n\t\t\t\t.p('Part of ', h.a('http://todomvc.com', 'TodoMVC'))\n\t\t\t);\n\t\t},\n\n\t\tstatsSectionNav(route) {\n\t\t\treturn this.ul(\n\t\t\t\th.id('filters').class('filters')\n\t\t\t\t.li(h.a('#/', h.class('selected', route === 'all'), 'All'))\n\t\t\t\t.li(h.a('#/active', h.class('selected', route === 'active'), 'Active'))\n\t\t\t\t.li(h.a('#/completed', h.class('selected', route === 'completed'), 'Completed'))\n\t\t\t);\n\t\t},\n\n\t\tclearCompletedButton(todosCompleted, methods) {\n\t\t\treturn this.button(\n\t\t\t\th.id('clear-completed').class('clear-completed')\n\t\t\t\t.visible(todosCompleted > 0)\n\t\t\t\t.on('dblclick', methods.clearCompleted),\n\t\t\t\t'Clear completed (' + todosCompleted + ')'\n\t\t\t);\n\t\t},\n\n\t\tstatsSection(todos, route, methods) {\n\t\t\tconst todosLeft = todos.filter((todo) => {\n\t\t\t\t\treturn !todo.completed;\n\t\t\t\t}).length,\n\t\t\t\ttodosCompleted = todos.length - todosLeft;\n\n\t\t\treturn this.footer(\n\t\t\t\th.id('footer').class('footer')\n\t\t\t\t.visible(todos.length)\n\t\t\t\t.span(\n\t\t\t\t\th.id('todo-count').class('todo-count').strong(todosLeft),\n\t\t\t\t\t(todosLeft === 1 ? ' item' : ' items') + ' left'\n\t\t\t\t)\n\t\t\t\t.statsSectionNav(route)\n\t\t\t\t.clearCompletedButton(todosCompleted, methods)\n\t\t\t);\n\t\t}\n\n\t};\n});\n\nexport default todomvcLexicon;\n\n","import bbl from 'babelute';\nimport htmlLexicon from 'babelute-html-lexicon';\n\n/*\n * @Author: Gilles Coomans\n * @licence MIT\n * @copyright 2017 Gilles Coomans\n */\n\nvar _targets = {\n  html: true\n};\n\n/*\n * @Author: Gilles Coomans\n * @licence MIT\n * @copyright 2017 Gilles Coomans\n */\n/**\n * @external {Pragmatics} https://github.com/nomocas/babelute\n */\n\nvar removeActions = {\n\tattr: function attr($tag, lexem) {\n\t\t$tag.removeAttribute(lexem.args[0]);\n\t},\n\tclass: function _class($tag, lexem) {\n\t\tif (lexem.args[0]) $tag.classList.remove(lexem.args[0]);\n\t},\n\tclasses: function classes($tag, lexem) {\n\t\tvar splitted = lexem.args[0].split(/\\s+/);\n\t\tsplitted.forEach(function (cl) {\n\t\t\tif (cl) $tag.classList.remove(cl);\n\t\t});\n\t},\n\tprop: function prop($tag, lexem) {\n\t\tdelete $tag[lexem.args[0]];\n\t},\n\tdata: function data($tag, lexem) {\n\t\tdelete $tag.dataset[lexem.args[0]];\n\t},\n\tstyle: function style($tag, lexem) {\n\t\tdelete $tag.style[lexem.args[0]];\n\t},\n\tid: function id($tag) {\n\t\tdelete $tag.id;\n\t},\n\ton: function on($tag, lexem) {\n\t\t$tag.removeEventListener(lexem.args[0], lexem.listener);\n\t},\n\tonDom: function onDom($tag, lexem /* render, dif, remove */, component) {\n\t\tvar remove = lexem.args[2];\n\t\tif (remove) remove($tag, lexem, component);\n\t},\n\thtml: function html($tag, lexem) {\n\t\tif (lexem.html) lexem.html.forEach(function (child) {\n\t\t\treturn $tag.removeChild(child);\n\t\t});\n\t},\n\ttext: function text($tag, lexem) {\n\t\t$tag.removeChild(lexem.child);\n\t},\n\teach: function each($tag, lexem, component) {\n\t\tlexem.children.forEach(function (child) {\n\t\t\treturn remove($tag, child, component);\n\t\t});\n\t},\n\ttag: function tag($tag, lexem) {\n\t\tvar babelutes = lexem.args[1],\n\t\t    len = babelutes.length;\n\t\tfor (var i = 0; i < len; ++i) {\n\t\t\tseekAndUnmountComponent(babelutes[i]);\n\t\t}$tag.removeChild(lexem.child);\n\t}\n};\n\nfunction remove($tag, babelute, component) {\n\tfor (var i = 0, lexems = babelute._lexems, lexem, len = lexems.length; i < len; ++i) {\n\t\tlexem = lexems[i];\n\t\tif (!_targets[lexem.lexicon]) continue;\n\t\tif (removeActions[lexem.name]) // class, attr, id, prop, data, each, text, tag, html, component and .on\n\t\t\tremoveActions[lexem.name]($tag, lexem, component);else if (lexem.developed) // compounds and if\n\t\t\tremove($tag, lexem.developed, component);\n\n\t\tif (lexem.witness) // if, each, component\n\t\t\t$tag.removeChild(lexem.witness);\n\t}\n}\n\nfunction seekAndUnmountComponent(babelute) {\n\tvar instance = void 0;\n\tfor (var i = 0, lexems = babelute._lexems, lexem, len = lexems.length; i < len; ++i) {\n\t\tlexem = lexems[i];\n\t\tif (_targets[lexem.lexicon]) {\n\t\t\tif (lexem.children) // each\n\t\t\t\tseekAndUnmountComponentInArray(lexem.children);else if (lexem.name === 'tag') seekAndUnmountComponentInArray(lexem.args[1]);else if (lexem.name === 'onDom') removeActions.onDom(lexem.$tag, lexem /*, component*/);else if (lexem.instance) {\n\t\t\t\t// component, postalComponent and container\n\t\t\t\tinstance = lexem.instance;\n\t\t\t\tseekAndUnmountComponent(instance.developed);\n\t\t\t\tinstance.componentWillUnmount && (instance.componentWillUnmount(), instance.componentDidUnmount()); // if we have one we have both\n\t\t\t} else if (lexem.developed) // compounds and if, router \n\t\t\t\tseekAndUnmountComponent(lexem.developed);\n\t\t}\n\t}\n}\n\n/*\n\tTODO : manage onDom third method while seeking\n */\n\nfunction seekAndUnmountComponentInArray(babelutes) {\n\tvar lenB = babelutes.length;\n\tfor (var j = 0; j < lenB; ++j) {\n\t\tseekAndUnmountComponent(babelutes[j]);\n\t}\n}\n\n\n\n/*\n\tFor optimisation : component should keep its parent reference\n\n\tif compoenent has a componentWillUnmount (or did)\n\t==> this.parent.childNeedUnmount++; \n\twhich should be forwarded to its own parent, etc\n\t==> then on unmount\n\t\tthis.parent.childNeedUnmout--;\n\t\twhich should be forwarded to its own parent, etc\n\n\twhen seeking for unmountable component : when encounter a component : check childNeedUnmout count.\n\tIf 0 : don't recurse\n */\n\n/*\n * @Author: Gilles Coomans\n */\n\n/**\n * parse and insert html string in node and return created nodes\n * @param  {[type]} content     [description]\n * @param  {[type]} node        [description]\n * @param  {[type]} nextSibling [description]\n * @return {[type]}             [description]\n */\nfunction insertHTML(content, node) {\n\tvar nextSibling = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n\tif (!content) return;\n\n\t// TODO: use this in place : still to catch iserted elements and manage buggy text nodes (when html start with text node)\n\t// if(nextSibling)\n\t// \tnextSibling.insertAdjacentHTML('beforebegin', content);\n\t// else\n\t// \tnode.insertAdjacentHTML('beforeend', content)\n\n\tvar div = document.createElement('div'),\n\t    elems = [];\n\tvar wrapped = void 0;\n\tif (content[0] !== '<') {\n\t\t// to avoid bug of text node that disapear\n\t\tcontent = '<p>' + content + '</p>';\n\t\twrapped = true;\n\t}\n\tdiv.innerHTML = content;\n\tvar parent = wrapped ? div.firstChild : div,\n\t    childNodes = [].slice.call(parent.childNodes);\n\tvar frag = void 0;\n\tif (nextSibling) frag = document.createDocumentFragment();\n\tfor (var i = 0, len = childNodes.length, el; i < len; ++i) {\n\t\tel = childNodes[i];\n\t\telems.push(el);\n\t\t(frag || node).appendChild(el);\n\t}\n\tif (nextSibling) node.insertBefore(frag, nextSibling);\n\treturn elems;\n}\n\nvar toConsumableArray = function (arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) arr2[i] = arr[i];\n\n    return arr2;\n  } else {\n    return Array.from(arr);\n  }\n};\n\n/*\n * @Author: Gilles Coomans\n * @licence MIT\n * @copyright 2017 Gilles Coomans\n * @external {Pragmatics} https://github.com/nomocas/babelute\n */\n\nvar renderActions = {\n\t// Atoms rendering\n\tclass: function _class($tag, lexem) {\n\t\tvar args = lexem.args; /* className */\n\t\tif (args[0] && (args.length === 1 || args[1])) $tag.classList.add(args[0]);\n\t},\n\tclasses: function classes($tag, lexem /* args : classes */) {\n\t\tvar splitted = lexem.args[0].split(/\\s+/);\n\t\tsplitted.forEach(function (cl) {\n\t\t\tif (cl) $tag.classList.add(cl);\n\t\t});\n\t},\n\tattr: function attr($tag, lexem) {\n\t\tvar args = lexem.args; /* name, value */\n\t\t$tag.setAttribute(args[0], args[1]);\n\t},\n\tprop: function prop($tag, lexem) {\n\t\tvar args = lexem.args; /* name, value */\n\t\t$tag[args[0]] = args[1];\n\t},\n\tdata: function data($tag, lexem) {\n\t\tvar args = lexem.args; /* name, value */\n\t\t$tag.dataset[args[0]] = args[1];\n\t},\n\tstyle: function style($tag, lexem) {\n\t\tvar args = lexem.args; /* name, value */\n\t\t$tag.style[args[0]] = args[1];\n\t},\n\tid: function id($tag, lexem) {\n\t\t$tag.id = lexem.args[0];\n\t},\n\ton: function on($tag, lexem) {\n\t\tvar args = lexem.args,\n\n\t\t/* eventName, callback */\n\t\tclosure = lexem.closure = { handler: args[1], args: args[2] };\n\t\tlexem.listener = function (e) {\n\t\t\tclosure.handler.apply(closure, [e].concat(toConsumableArray(closure.args)));\n\t\t};\n\t\t$tag.addEventListener(args[0], lexem.listener);\n\t},\n\n\n\t// structural render actions\n\ttag: function tag($tag, lexem, component, frag) {\n\t\tlexem.child = document.createElement(lexem.args[0]);\n\t\t(frag || $tag).appendChild(lexem.child);\n\t\tvar babelutes = lexem.args[1];\n\t\tfor (var i = 0, len = babelutes.length, babelute; i < len; ++i) {\n\t\t\tbabelute = babelutes[i];\n\t\t\tif (typeof babelute === 'undefined') // cast undefined to '' to keep track of node for diffing\n\t\t\t\tbabelute = '';\n\t\t\tif (!babelute || !babelute.__babelute__) // text node\n\t\t\t\tbabelute = babelutes[i] = new bbl.Babelute()._append('html', 'text', [babelute]);\n\t\t\trender(lexem.child, babelute, component);\n\t\t}\n\t},\n\ttext: function text($tag, lexem, component, frag) {\n\t\tlexem.child = document.createTextNode(lexem.args[0]);\n\t\t(frag || $tag).appendChild(lexem.child);\n\t},\n\tif: function _if($tag, lexem, component, frag) {\n\t\tvar toRender = lexem.args[0] ? lexem.args[1] : lexem.args[2] ? lexem.args[2] : null;\n\t\tif (toRender) {\n\t\t\tlexem.developed = typeof toRender === 'function' ? toRender(lexem.args[0]) : toRender;\n\t\t\trender($tag, lexem.developed, component, frag);\n\t\t}\n\t\tlexem.witness = document.createComment('if');\n\t\t$tag.appendChild(lexem.witness);\n\t},\n\teach: function each($tag, lexem, component, frag) {\n\t\tvar args = lexem.args,\n\t\t    collection = args[0] = args[0] || [],\n\t\t    itemRender = args[1];\n\t\tlexem.children = [];\n\t\tfor (var i = 0, len = collection.length, developed; i < len; ++i) {\n\t\t\tdeveloped = itemRender(collection[i], i);\n\t\t\tlexem.children.push(developed);\n\t\t\trender($tag, developed, component, frag);\n\t\t}\n\t\tlexem.witness = document.createComment('each');\n\t\t$tag.appendChild(lexem.witness);\n\t},\n\n\n\t// custom output\n\tonDom: function onDom($tag, lexem, component, frag /* args = render, dif, remove */) {\n\t\tvar onRender = lexem.args[0];\n\t\tlexem.$tag = $tag;\n\t\tif (onRender) onRender($tag, lexem, component, frag);\n\t},\n\thtml: function html($tag, lexem) {\n\t\tlexem.html = insertHTML(lexem.args[0], $tag);\n\t\tlexem.witness = document.createComment('html');\n\t\t$tag.appendChild(lexem.witness);\n\t},\n\texecute: function execute($tag, lexem) {\n\t\tlexem.args[0].apply(null, lexem.args[1]);\n\t},\n\tref: function ref($tag, lexem, component) {\n\t\tcomponent && (component[lexem.args[0]] = $tag);\n\t},\n\tswitchUse: function switchUse($tag, lexem, component, frag) {\n\t\tvar _ref;\n\n\t\tlexem.developed = (_ref = new bbl.FirstLevel())._use.apply(_ref, [lexem.args[0]].concat(toConsumableArray(lexem.args[1])));\n\t\trender($tag, lexem.developed, component, frag);\n\t\tlexem.witness = document.createComment('switchUse');\n\t\t$tag.appendChild(lexem.witness);\n\t}\n};\n\nfunction render($tag, babelute, component, frag) {\n\tfor (var i = 0, lexem, lexems = babelute._lexems, len = lexems.length; i < len; ++i) {\n\t\tlexem = lexems[i];\n\t\tif (!_targets[lexem.lexicon]) continue;\n\t\tif (renderActions[lexem.name]) renderActions[lexem.name]($tag, lexem, component, frag);else {\n\t\t\t// no actions means it's a compound lexem.\n\t\t\tif (!lexem.args || !lexem.args.length) // if lexem has receive no arguments : bypass level-by-level developpement\n\t\t\t\tlexem.developed = bbl.developToAtoms(lexem, _targets[lexem.lexicon]);else // or develop just next level and recurse.\n\t\t\t\tlexem.developed = bbl.developOneLevel(lexem, _targets[lexem.lexicon]);\n\t\t\tlexem.developed && render($tag, lexem.developed, component, frag);\n\t\t}\n\t}\n}\n\n/*\n * @Author: Gilles Coomans\n * @licence MIT\n * @copyright 2017 Gilles Coomans\n */\n/**\n * @external {Pragmatics} https://github.com/nomocas/babelute\n */\n\n/**\n * difActions\n * @public\n * @type {Object}\n */\nvar difActions = {\n\t// structurals\n\tif: function _if($tag, lexem, olexem, component) {\n\t\tlexem.witness = olexem.witness;\n\t\tvar args = lexem.args,\n\t\t    oargs = olexem.args;\n\t\tvar toRender = void 0;\n\t\tif (!args[0] !== !oargs[0]) {\n\t\t\t// condition has change\n\t\t\tif (!args[0] || oargs[2]) // if condition was true (there is a success babelute that was developed) OR it was false and there is an elseBabelute in olexem that was developed\n\t\t\t\tremove($tag, olexem.developed, component); // remove old babelute (either \"success or else\" babelute)\n\t\t\ttoRender = args[0] ? args[1] : args[2]; // if condition is true take \"success babelute\", else take \"else babelute\"\n\t\t\tif (toRender) {\n\t\t\t\t// render : add children tags to fragment then add to $tag + add attributes (and co) directly to $tag.\n\t\t\t\tvar frag = document.createDocumentFragment();\n\t\t\t\tlexem.developed = typeof toRender === 'function' ? toRender() : toRender;\n\t\t\t\trender($tag, lexem.developed, component, frag);\n\t\t\t\t$tag.insertBefore(frag, lexem.witness);\n\t\t\t}\n\t\t} else {\n\t\t\t// no change so dif developed babelutes\n\t\t\ttoRender = args[0] ? args[1] : args[2];\n\t\t\tif (toRender) {\n\t\t\t\tlexem.developed = typeof toRender === 'function' ? toRender() : toRender;\n\t\t\t\tdif($tag, lexem.developed, olexem.developed, component);\n\t\t\t}\n\t\t}\n\t},\n\teach: function each($tag, lexem, olexem, component) {\n\t\tvar collection = lexem.args[0] || [],\n\t\t    renderItem = lexem.args[1],\n\t\t    ochildren = olexem.children,\n\t\t    len = collection.length,\n\t\t    olen = ochildren.length,\n\t\t    children = lexem.children = new Array(len);\n\n\t\tvar developed = void 0,\n\t\t    frag = void 0,\n\t\t    item = void 0,\n\t\t    i = 0;\n\n\t\tlexem.witness = olexem.witness; // keep track of witness\n\n\t\tif (len > olen) // create fragment for new items\n\t\t\tfrag = document.createDocumentFragment();\n\t\tfor (; i < len; ++i) {\n\t\t\t// for all items (from new lexem)\n\t\t\titem = collection[i];\n\t\t\tdeveloped = renderItem(item, i); // render firstdegree item\n\t\t\tchildren[i] = developed; // keep new developed for next diffing\n\t\t\tif (i < olen) // dif existing children\n\t\t\t\tdif($tag, developed, ochildren[i], component);else // full render new item and place produced tags in fragment \n\t\t\t\trender($tag, developed, component, frag); // ($tag is forwarded for first level non-tags atoms lexems (aka class, attr, ...))\n\t\t}\n\t\tfor (; i < olen; ++i) {\n\t\t\t// remove not diffed old children\n\t\t\tremove($tag, ochildren[i], component);\n\t\t}if (frag) // insert new children fragment (if any)\n\t\t\t$tag.insertBefore(frag, lexem.witness);\n\t},\n\n\n\t/*\n \tkeyedEach are almost workable.\n \tstill only reinsert logic (tag displacement) \n  */\n\n\t// keyedEach($tag, lexem, olexem, component, frag) {\n\t// \tconst items = lexem.args[1],\n\t// \t\tkeyName = lexem.args[1],\n\t// \t\trenderer = lexem.args[2],\n\t// \t\tnewDico = lexem.dico = {},\n\t// \t\toDico = olexem.dico,\n\t// \t\toChildren = olexem.children,\n\t// \t\tchildren = lexem.children = [];\n\n\t// \tlet lastdeveloped, seenIndex = 0,\n\t// \t\ti = 0,\n\t// \t\tkey, olddeveloped, newdeveloped;\n\n\t// \tfor (let len = items.length, item; i < len; ++i) {\n\t// \t\t// dif then displace : displace mean reinserting child (tag(s)) at current index\n\t// \t\tkey = item[keyName];\n\t// \t\tolddeveloped = oDico[key];\n\t// \t\tnewdeveloped = renderer(item);\n\n\t// \t\tchildren.push(newdeveloped);\n\n\t// \t\tif (olddeveloped) {\n\t// \t\t\tdif($tag, newdeveloped, olddeveloped, component);\n\t// \t\t\tif (i !== olddeveloped.index)\n\t// \t\t\t\treinsert($tag, newdeveloped, lastChild(lastdeveloped)); // (displace tags after last developed)\n\n\t// \t\t\t// reorder oldChildren by swapping (for catching notSeens at the end of ochildren)\n\t// \t\t\tif (seenIndex !== olddeveloped.index) {\n\t// \t\t\t\tconst temp = oChildren[seenIndex];\n\t// \t\t\t\toChildren[seenIndex] = oChildren[olddeveloped.index];\n\t// \t\t\t\toChildren[olddeveloped.index] = temp;\n\t// \t\t\t}\n\t// \t\t\tseenIndex++;\n\t// \t\t} else if (i < oChildren.length) {\n\t// \t\t\t// render in fragment then insertBefore lastdeveloped.nextSibling\n\t// \t\t\tconst frag = document.createDocumentFragment();\n\t// \t\t\trender(frag, newdeveloped, component);\n\t// \t\t\t$tag.insertBefore(frag, lastChild(lastdeveloped).nextSibling);\n\t// \t\t} else {\n\t// \t\t\trender($tag, newdeveloped, component, frag);\n\t// \t\t}\n\t// \t\tnewDico[key] = lastdeveloped = newdeveloped;\n\t// \t\tnewdeveloped.index = i;\n\t// \t}\n\n\t// \t// remove rest of oldChildren (so unseens if any)\n\t// \tfor (; i < oChildren.length; ++i)\n\t// \t\tremove($tag, oChildren[i], component);\n\t// },\n\n\ttag: function tag($tag, lexem, olexem, component) {\n\t\tlexem.child = olexem.child; // keep track of elementNode\n\t\tvar babelutes = lexem.args[1],\n\t\t    obabelutes = olexem.args[1];\n\n\t\tvar babelute = void 0,\n\t\t    obabelute = void 0;\n\t\tfor (var i = 0, len = babelutes.length; i < len; i++) {\n\t\t\t// render all children's babelutes\n\t\t\tbabelute = babelutes[i];\n\t\t\tobabelute = obabelutes[i];\n\t\t\tif (babelute === obabelute) continue;\n\t\t\tif (typeof babelute === 'undefined') // cast undefined to empty string\n\t\t\t\tbabelute = '';\n\t\t\tif (!babelute || !babelute.__babelute__) babelute = babelutes[i] = new bbl.Babelute()._append('html', 'text', [babelute]);\n\t\t\tdif(lexem.child, babelute, obabelute, component);\n\t\t}\n\t},\n\ttext: function text($tag, lexem, olexem) {\n\n\t\tvar newText = lexem.args[0];\n\n\t\tlexem.child = olexem.child; // keep track of textnode\n\t\tif (newText !== olexem.args[0]) lexem.child.nodeValue = newText;\n\t},\n\n\n\t// html simple atoms diffing\n\tclass: function _class($tag, lexem, olexem) {\n\n\t\tvar name = lexem.args[0],\n\t\t    // new class name\n\t\toname = olexem.args[0],\n\t\t    // old class name\n\t\tflag = lexem.args[1],\n\t\t    // new class flag\n\t\toflag = olexem.args[1]; // old class flag\n\n\t\tif (name !== oname) {\n\t\t\tif (oname) $tag.classList.remove(oname);\n\t\t\tif (name && (lexem.args.length === 1 || flag)) $tag.classList.add(name);\n\t\t} else if (name && lexem.args.length > 1 && !flag !== !oflag) $tag.classList.toggle(name);\n\t},\n\tclasses: function classes() {\n\t\t// do nothing\n\t},\n\tattr: function attr($tag, lexem, olexem) {\n\t\tvar name = lexem.args[0],\n\t\t    value = lexem.args[1],\n\t\t    oname = olexem.args[0],\n\t\t    ovalue = olexem.args[1];\n\n\t\tif (name !== oname) {\n\t\t\t$tag.removeAttribute(oname);\n\t\t\t$tag.setAttribute(name, value);\n\t\t} else if (value !== ovalue) $tag.setAttribute(name, value);\n\t},\n\tprop: function prop($tag, lexem, olexem) {\n\n\t\tvar name = lexem.args[0],\n\t\t    value = lexem.args[1],\n\t\t    oname = olexem.args[0];\n\n\t\tif (name !== oname) {\n\t\t\tdelete $tag[oname];\n\t\t\t$tag[name] = value;\n\t\t} else if (value !== $tag[name] /*olexem.args[1]*/) // look diectly in element : for \"checked\" bug (or other properties that change on native interaction with element)\n\t\t\t$tag[name] = value;\n\t},\n\tdata: function data($tag, lexem, olexem) {\n\n\t\tvar name = lexem.args[0],\n\t\t    value = lexem.args[1],\n\t\t    oname = olexem.args[0],\n\t\t    ovalue = olexem.args[1];\n\n\t\tif (name !== oname) {\n\t\t\tdelete $tag.dataset[oname];\n\t\t\t$tag.dataset[name] = value;\n\t\t} else if (value !== ovalue) $tag.dataset[name] = value;\n\t},\n\tstyle: function style($tag, lexem, olexem) {\n\t\tvar name = lexem.args[0],\n\t\t    value = lexem.args[1],\n\t\t    oname = olexem.args[0],\n\t\t    ovalue = olexem.args[1];\n\n\t\tif (name !== oname) {\n\t\t\tdelete $tag.style[oname];\n\t\t\t$tag.style[name] = value;\n\t\t} else if (value !== ovalue) $tag.style[name] = value;\n\t},\n\tid: function id($tag, lexem, olexem) {\n\t\tvar id = lexem.args[0];\n\t\tif (id !== olexem.args[0]) $tag.id = id;\n\t},\n\ton: function on($tag, lexem, olexem) {\n\t\tvar name = lexem.args[0],\n\t\t    oname = olexem.args[0];\n\t\tif (name !== oname) {\n\t\t\t$tag.removeEventListener(oname, olexem.listener);\n\t\t\trenderActions.on($tag, lexem);\n\t\t} else {\n\t\t\tvar closure = lexem.closure = olexem.closure;\n\t\t\tlexem.listener = olexem.listener;\n\t\t\tclosure.handler = lexem.args[1];\n\t\t\tclosure.args = lexem.args[2];\n\t\t}\n\t},\n\tonDom: function onDom($tag, lexem, olexem /* args = render, dif, remove */, component) {\n\t\tvar dif = lexem.args[1];\n\t\tlexem.$tag = $tag;\n\t\tif (dif) dif($tag, lexem, olexem, component);\n\t},\n\thtml: function html($tag, lexem, olexem) {\n\t\tvar newHTML = lexem.args[0];\n\t\tlexem.witness = olexem.witness;\n\t\tif (olexem.args[0] !== newHTML) {\n\t\t\tolexem.html && olexem.html.forEach(function (child) {\n\t\t\t\treturn $tag.removeChild(child);\n\t\t\t});\n\t\t\tlexem.html = insertHTML(newHTML, $tag, lexem.witness);\n\t\t}\n\t},\n\texecute: function execute($tag, lexem, olexem) {\n\t\tif (lexem.args[0] !== olexem.args[0] || !argsChanged(lexem.args[1], olexem.args[1])) return;\n\t\tlexem.args[0].apply(null, lexem.args[1]);\n\t},\n\tcomponent: function component($tag, lexem, olexem) {\n\t\tif (lexem.args[0] !== olexem.args[0]) throw new Error('You must not change component\\'s class when rerendering');\n\t\tlexem.instance = olexem.instance;\n\t\tlexem.witness = olexem.witness;\n\t\tlexem.instance.setProps(lexem.args[1]);\n\t},\n\tswitchUse: function switchUse($tag, lexem, olexem, component) {\n\t\tvar val = lexem.args[0],\n\t\t    args = lexem.args[1];\n\t\tlexem.witness = olexem.witness;\n\t\tif (val !== olexem.args[0]) {\n\t\t\tvar _ref;\n\n\t\t\tremove($tag, olexem.developed, component);\n\t\t\tlexem.developed = (_ref = new bbl.FirstLevel())._use.apply(_ref, [val].concat(toConsumableArray(args)));\n\t\t\tvar frag = document.createDocumentFragment();\n\t\t\trender($tag, lexem.developed, component, frag);\n\t\t\t$tag.insertBefore(frag, lexem.witness);\n\t\t} else if (argsChanged(args, olexem.args[1])) {\n\t\t\tvar _ref2;\n\n\t\t\tlexem.developed = (_ref2 = new bbl.FirstLevel())._use.apply(_ref2, [val].concat(toConsumableArray(args)));\n\t\t\tdif($tag, lexem.developed, olexem.developed, component);\n\t\t} else lexem.developed = olexem.developed;\n\t}\n};\n\nfunction dif($tag, babelute, oldb, component) {\n\tfor (var lexem, olexem, i = 0, len = babelute._lexems.length; i < len; ++i) {\n\t\tlexem = babelute._lexems[i];\n\t\tif (!_targets[lexem.lexicon]) continue;\n\t\tolexem = oldb._lexems[i];\n\t\tif (!lexem.args.length) // wathever lexem is : no args implies never change, so keep old developed\n\t\t\tlexem.developed = olexem.developed;else {\n\t\t\tif (difActions[lexem.name]) // let strategy action do the job\n\t\t\t\tdifActions[lexem.name]($tag, lexem, olexem, component);else if (argsChanged(lexem.args, olexem.args)) {\n\t\t\t\t// no action means compounds first degree lexem. so check args dif...\n\t\t\t\tlexem.developed = bbl.developOneLevel(lexem, _targets[lexem.lexicon]);\n\t\t\t\tdif($tag, lexem.developed, olexem.developed, component);\n\t\t\t} else // keep old developed (compounds args haven't changed : so nothing to do)\n\t\t\t\tlexem.developed = olexem.developed;\n\t\t}\n\t}\n}\n\nfunction argsChanged(args, oargs) {\n\tfor (var i = 0, len = args.length; i < len; ++i) {\n\t\tif (args[i] !== oargs[i]) // simple reference check : need \"immutables\"\n\t\t\treturn true;\n\t}return false;\n}\n\n/*\n * @Author: Gilles Coomans\n * @licence MIT\n * @copyright 2017 Gilles Coomans\n */\n\n// lexem : .component(Component, props)\n\nrenderActions.component = function ($tag, lexem, parent, frag) {\n\tvar instance = lexem.instance = new lexem.args[0](lexem.args[1], parent);\n\tmountComponentInstance($tag, instance, true, frag);\n};\n\ndifActions.component = function ($tag, lexem, olexem) {\n\tif (lexem.args[0] !== olexem.args[0]) throw new Error('You must not change component\\'s class when rerendering');\n\tlexem.instance = olexem.instance;\n\tif (lexem.args[1]) lexem.instance.setProps(lexem.args[1]);\n};\n\nremoveActions.component = function ($tag, lexem) {\n\tlexem.instance.unmount();\n\t$tag.removeChild(lexem.instance.witness);\n};\n\nfunction mountComponentInstance($tag, instance, addWitness, frag) {\n\tinstance._render = function () {\n\t\t// update\n\t\tvar developed = this.render(true);\n\t\tif (this.developed) dif($tag, developed, this.developed, this);else render($tag, developed, this);\n\t\tthis.developed = developed;\n\t};\n\n\tinstance._remove = function () {\n\t\t// unmount\n\t\tseekAndUnmountComponent(this.developed); // depth-first\n\t\tremove($tag, this.developed, instance);\n\t};\n\n\t// first render (mounting)\n\tinstance.componentWillMount();\n\tinstance.developed = instance.render(true);\n\trender($tag, instance.developed, instance, frag);\n\tif (addWitness) {\n\t\tinstance.witness = document.createComment('component');\n\t\t$tag.appendChild(instance.witness);\n\t}\n\tinstance.componentDidMount();\n}\n\n/*\n * @Author: Gilles Coomans\n *\n * Simple stateless unmountable container.\n *\n * Useful for closable dialogs, or small widgets that don't need full state logic.\n */\n\n// lexem : .container((container) => h.div('click me to unmount !', h.click(container.unmount)))\n\nrenderActions.container = function ($tag, lexem, component, frag) {\n\tvar container = lexem.instance = {};\n\tcontainer.unmount = function () {\n\t\tseekAndUnmountComponent(this.developed); // depth-first\n\t\tremove($tag, this.developed, component);\n\t}.bind(container);\n\tcontainer.developed = lexem.args[0](container);\n\trender($tag, container.developed, component, frag);\n};\n\ndifActions.container = function ($tag, lexem, olexem, component) {\n\tvar container = lexem.instance = olexem.instance,\n\t    developed = lexem.args[0](container);\n\tdif($tag, developed, container.developed, component);\n\tcontainer.developed = developed;\n};\n\nremoveActions.container = function ($tag, lexem) {\n\tlexem.instance.unmount();\n};\n\n/**\n * Babelute HTML Dom Diffing Pragmatics\n * @author Gilles Coomans\n * @licence MIT\n * @copyright 2017 Gilles Coomans\n */\n/**\n * @external {Pragmatics} https://github.com/nomocas/babelute\n */\n\n// import './postal-component';\nhtmlLexicon.addAliases({\n  $render: function $render(domElement) {\n    var oldBabelute = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n\n    if (oldBabelute) return dif(domElement, this, oldBabelute);\n    return render(domElement, this);\n  },\n  $remove: function $remove(domElement) {\n    return remove(domElement, this);\n  }\n});\n\n/**\n * DomDiffing Pragmatics instance\n * @public\n * @type {Pragmatics}\n * @todo  addTargetLexicon(lexicon) => catch name for _targets + store lexicon reference for one level developement : no more need to register lexicons globally\n * @example\n * import difPragmas from 'babelute-html-dom-diffing-pragmatics';\n * import htmlLexicon from 'babelute-hstml/src/html-lexicon.js';\n *\n * const h = htmlLexicon.initializer(true); // FirtsLevel initializer\n * const $root = document.getElementById('foo');\n * let oldRendered, // for diffing tracking\n * \tanimFrame;\n *\n * function render(){\n * \treturn h.div(state.intro).section(h.class('my-section').h1(state.title));\n * }\n *\n * function update(state) {\n * \tif (animFrame)\n * \t\tcancelAnimationFrame(animFrame);\n * \tanimFrame = requestAnimationFrame(() => {\n * \t\tconst newRendered = render(state);\n * \t\toldRendered = difPragmas.$output($root, newRendered, oldRendered);\n * \t});\n * }\n * \n * update(myState);\n */\nvar difPragmas = bbl.createPragmatics(_targets, {\n  $output: function $output($tag, babelute, oldBabelute) {\n    var component = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n\n    oldBabelute ? dif($tag, babelute, oldBabelute, component) : render($tag, babelute, component);\n    return babelute;\n  },\n  addLexicon: function addLexicon(lexicon, name) {\n    this._targets[name || lexicon.name] = lexicon;\n    while (lexicon.parent) {\n      lexicon = lexicon.parent;\n      this._targets[lexicon.name] = lexicon;\n    }\n  },\n\n  mountComponentInstance: mountComponentInstance,\n  render: render,\n  dif: dif,\n  remove: remove,\n  renderActions: renderActions,\n  difActions: difActions,\n  removeActions: removeActions,\n  seekAndUnmountComponent: seekAndUnmountComponent,\n  seekAndUnmountComponentInArray: seekAndUnmountComponentInArray\n});\n\nexport default difPragmas;\n//# sourceMappingURL=index.mjs.map\n","/**s\n * Todomvc : Browser Side Launcher\n * \n * @author Gilles Coomans\n */\n\nimport store from './store.js'; // my \"immutable\" store\nimport todomvcLexicon from './todomvc-html-lexicon'; // my custom html lexicon\nimport differ from 'babelute-html-dom-diffing-pragmatics'; // first degree diffing (only for DOM)\n\t\nconst h = todomvcLexicon.initializer(true),\n\t$root = document.getElementById('todoapp'); // where rendering take place\n\n// don't forget to add your lexicon(s) name to differ (only for FirstLevel diffing - not needed for dom or string output)\ndiffer.addLexicon(todomvcLexicon);\t\n\n// ---------- render ----------\n\nlet oldRendered, // for diffing tracking\n\tanimFrame;\n\n// bind todos update to main render\nstore.on('update', (state) => {\n\tif (animFrame)\n\t\tcancelAnimationFrame(animFrame);\n\tanimFrame = requestAnimationFrame(() => {\n\t\toldRendered = differ.$output($root, h.todomvc(state.todos, state.route, state.methods), oldRendered);\n\t});\n});\n\n// -------- routes ----------\n\n// simple hashchange binding for routing\nfunction hashChange() {\n\tstore.route = window.location.hash.substring(2) || 'all';\n\tstore.emit('update', store);\n}\nwindow.onhashchange = hashChange;\n\nhashChange(); // set current route and launch"],"names":["_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","Constructor","protoProps","staticProps","prototype","_classCallCheck","instance","TypeError","DEFAULT_VALUES","EventEmitter","opts","arguments","undefined","emitDelay","strictMode","hasOwnProperty","_emitDelay","_strictMode","_listeners","events","_addListenner","type","listener","once","indexOf","push","on","off","eventType","listenerFunc","_this","typeIndex","hasType","splice","removedEvents","typeListeners","forEach","fn","idx","unshift","_applyEvents","eventArguments","removableListeners","eeListener","apply","emit","_this2","_len","eventArgs","Array","_key","call","emitSync","_len2","_key2","destroy","module","Todos","proto","title","todos","concat","ID","id","filter","todo","map","assign","completed","methods","bind","classCallCheck","createClass","inherits","subClass","superClass","create","setPrototypeOf","__proto__","possibleConstructorReturn","self","ReferenceError","Lexem","lexicon","name","args","Babelute","lexems","_lexems","__babelute__","_append","lexiconName","_if","condition","babelute","elseBabelute","_each","array","func","item","index","b","_use","_lexicon","_extends","BaseClass","api","B","constructor","fromJSON","json","JSON","parse","k","v","lexem","FirstLevel","_Babelute","getPrototypeOf","__first_level_babelute__","getFirstLevelMethod","lexemName","Initializer","BaseInitializer","Class","createInitializer","BabeluteClass","Init","extends","initializer","_empty","keys","addToInitializer","methodName","lexicons","Lexicon","parent","Atomic","initClass","SecondLevel","secondLevel","addAtoms","atomsArray","addAtom","addCompounds","producer","_this3","atomicMethods","secondLevelCompounds","j","addAliases","_this4","use","firstLevel","Error","translateToAtomic","targets","translate","translateToFirstLevel","createDialect","createLexicon","getLexicon","registerLexicon","slice","splitted","split","value","init","asFirstLevel","developOneLevel","developToAtoms","Pragmatics","pragmas","_targets","addPragmas","$output","createPragmatics","FacadePragmatics","_Pragmatics","each","subject","percolator","collec","itemHandler","len","templ","createFacadeInitializer","pragmatics","Facade","_subject","_percolator","createFacadePragmatics","castNodeValueTo","node","textContent","parseInt","innerHTML","htmlLexicon","bbl","tagsList","eventsList","execute","method","switchUse","lexemRef","eventName","callback","_len3","_key3","tagName","_len4","_key4","h","select","selected","options","tag","option","label","link","href","rel","attr","linkCSS","input","val","prop","textInput","passwordInput","checkbox","checked","radio","content","script","src","a","img","nbsp","text","visible","yes","style","display","flag","disabled","contentEditable","opt","contentProperty","valueType","isEditable","placeholder","updateOnEvent","e","currentTarget","updateHandler","click","todomvcLexicon","route","visibleTodos","div","class","section","todomvcHeader","mainSection","statsSection","todomvcFooter","todosLength","toggleAllButton","ul","todoItem","header","h1","keyCode","append","toggleAll","updateTitle","li","toggleComplete","todoLabel","button","delete","footer","p","todosCompleted","clearCompleted","todosLeft","span","strong","statsSectionNav","clearCompletedButton","removeActions","$tag","removeAttribute","_class","classList","remove","classes","cl","data","dataset","removeEventListener","onDom","component","html","child","removeChild","children","babelutes","developed","witness","seekAndUnmountComponent","seekAndUnmountComponentInArray","componentWillUnmount","componentDidUnmount","lenB","insertHTML","nextSibling","document","createElement","elems","wrapped","firstChild","childNodes","frag","createDocumentFragment","el","appendChild","insertBefore","toConsumableArray","arr","isArray","arr2","from","renderActions","add","setAttribute","closure","handler","addEventListener","createTextNode","toRender","createComment","collection","itemRender","onRender","ref","_ref","render","difActions","olexem","oargs","renderItem","ochildren","olen","obabelutes","obabelute","newText","nodeValue","oname","oflag","toggle","ovalue","dif","newHTML","argsChanged","setProps","_ref2","oldb","unmount","mountComponentInstance","addWitness","_render","_remove","componentWillMount","componentDidMount","container","$render","domElement","oldBabelute","$remove","difPragmas","addLexicon","$root","getElementById","differ","oldRendered","animFrame","store","state","cancelAnimationFrame","requestAnimationFrame","todomvc","hashChange","window","location","hash","substring","onhashchange"],"mappings":"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"}